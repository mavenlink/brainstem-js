<!DOCTYPE html>
<html>
  <head>
  <meta charset='UTF-8'>
  <title>CoffeeScript API Documentation</title>
  <script src='../../javascript/application.js'></script>
  <script src='../../javascript/search.js'></script>
  <link rel='stylesheet' href='../../stylesheets/application.css' type='text/css'>
</head>
  <body>
    <div id='base' data-path='../../'></div>
<div id='header'>
  <div id='menu'>
    <a href='../../extra/README.md.html' title='Brainstem-js'>
      Brainstem-js
    </a>
    &raquo;
    <a href='../../alphabetical_index.html' title='Index'>
      Index
    </a>
    &raquo;
    <span class='title'>Brainstem</span>
    &raquo;
    <span class='title'>AbstractLoader</span>
  </div>
</div>
    <div id='content'>
      <h1>
        Class:
        Brainstem.AbstractLoader
      </h1>
      <table class='box'>
        <tr>
          <td>Defined in:</td>
          <td>vendor&#47;assets&#47;javascripts&#47;brainstem&#47;loaders&#47;abstract-loader.coffee</td>
        </tr>
      </table>
      <h2>Direct Known Subclasses</h2>
      <p class='children'>
        <a href='../../class/Brainstem/CollectionLoader.html'>Brainstem.CollectionLoader</a>
        <a href='../../class/Brainstem/ModelLoader.html'>Brainstem.ModelLoader</a>
      </p>
      <h2>Variables Summary</h2>
      <dl class='constants'>
  <dt id='internalObject-variable'>
    internalObject
    =
  </dt>
  <dd>
    <pre><code class='coffeescript'>null</code></pre>
    
  </dd>
  <dt id='externalObject-variable'>
    externalObject
    =
  </dt>
  <dd>
    <pre><code class='coffeescript'>null</code></pre>
    
  </dd>
</dl>
      <h2>Instance Method Summary</h2>
      <ul class='summary'>
  <li>
    <span class='signature'>
      <a href='#setup-dynamic'>
        #
(void)
<b>setup</b><span>(loadOptions)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Setup the loader with a list of Brainstem specific loadOptions</li>
<li>@param  {object} loadOptions Brainstem specific loadOptions (filters, include, only, etc)</li>
<li>@return {object} externalObject that was created.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#getCacheObject-dynamic'>
        #
(void)
<b>getCacheObject</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Returns the cache object from the storage manager.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#load-dynamic'>
        #
(void)
<b>load</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Loads the model from memory or the server.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_getCollectionName-dynamic'>
        #
(void)
<b>_getCollectionName</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Returns the name of the collection that this loader maps to and will update in the storageManager.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_getExpectationName-dynamic'>
        #
(void)
<b>_getExpectationName</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Returns the name that expectations will be stubbed with (story or stories etc)</li>
<li>@return {string} name of the stub</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_getModel-dynamic'>
        #
(void)
<b>_getModel</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>This needs to return a constructor for the model that associations will be compared with.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_getModelsForAssociation-dynamic'>
        #
(void)
<b>_getModelsForAssociation</b><span>(association)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>This needs to return an array of models that correspond to the supplied association.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_getIdsForAssociation-dynamic'>
        #
(void)
<b>_getIdsForAssociation</b><span>(association)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Returns an array of IDs that need to be loaded for this association.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_createObjects-dynamic'>
        #
(void)
<b>_createObjects</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Sets up both the <code>internalObject</code> and <code>externalObject</code>.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_updateObjects-dynamic'>
        #
(void)
<b>_updateObjects</b><span>(object, data, silent = false)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Updates the object with the supplied data.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_parseLoadOptions-dynamic'>
        #
(void)
<b>_parseLoadOptions</b><span>(loadOptions = {})</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Parse supplied loadOptions, add defaults, transform them into</li>
<li>appropriate structures, and pull out important pieces.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_buildCacheKey-dynamic'>
        #
(void)
<b>_buildCacheKey</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Builds a cache key to represent this object</li>
<li>@return {string} cache key</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_checkCacheForData-dynamic'>
        #
(void)
<b>_checkCacheForData</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Checks to see if the current requested data is available in the caching layer.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_loadFromServer-dynamic'>
        #
(void)
<b>_loadFromServer</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Makes a GET request to the server via Backbone.sync with the built syncOptions.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_updateStorageManagerFromResponse-dynamic'>
        #
(void)
<b>_updateStorageManagerFromResponse</b><span>(resp)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Called when the server responds with data and needs to be persisted to the storageManager.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_calculateAdditionalIncludes-dynamic'>
        #
(void)
<b>_calculateAdditionalIncludes</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Called after the server responds with the first layer of includes to determine if any more loads are needed.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_loadAdditionalIncludes-dynamic'>
        #
(void)
<b>_loadAdditionalIncludes</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Loads the next layer of includes from the server.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_buildSyncOptions-dynamic'>
        #
(void)
<b>_buildSyncOptions</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Generates the Brainstem specific options that are passed to Backbone.sync.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_shouldUseOnly-dynamic'>
        #
(void)
<b>_shouldUseOnly</b><span>()</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Decides whether or not the <code>only</code> filter should be applied in the syncOptions.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_modelsOrObj-dynamic'>
        #
(void)
<b>_modelsOrObj</b><span>(obj)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Parses the result of model.get(associationName) to either return a collection&#39;s models</li>
<li>or the model itself.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_onServerLoadSuccess-dynamic'>
        #
(void)
<b>_onServerLoadSuccess</b><span>(resp, _status, _xhr)</span>
      </a>
    </span>
    <span class='bound note title'>Bound</span>
    <span class='desc'>
      * <ul>
<li>Called when the Backbone.sync successfully responds from the server.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_onServerLoadError-dynamic'>
        #
(void)
<b>_onServerLoadError</b><span>(jqXHR, textStatus, errorThrown)</span>
      </a>
    </span>
    <span class='bound note title'>Bound</span>
    <span class='desc'>
      * <ul>
<li>Called when the Backbone.sync has errored.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_onLoadSuccess-dynamic'>
        #
(void)
<b>_onLoadSuccess</b><span>(data)</span>
      </a>
    </span>
    <span class='desc'>
      * <ul>
<li>Updates the internalObject with the data in the storageManager and either loads more data or resolves this load.</li>
</ul>

    </span>
  </li>
  <li>
    <span class='signature'>
      <a href='#_onLoadingCompleted-dynamic'>
        #
(void)
<b>_onLoadingCompleted</b><span>()</span>
      </a>
    </span>
    <span class='bound note title'>Bound</span>
    <span class='desc'>
      * <ul>
<li>Called when all loading (including nested loads) are complete.</li>
</ul>

    </span>
  </li>
</ul>
      <h2>Constructor Details</h2>
      <div class='methods'>
  <div class='method_details'>
    <p class='signature' id='constructor-dynamic'>
      #
(void)
<b>constructor</b><span>(options = {})</span>
      <br>
    </p>
    
  </div>
</div>
      <h2>Instance Method Details</h2>
      <div class='methods'>
  <div class='method_details'>
    <p class='signature' id='setup-dynamic'>
      #
(void)
<b>setup</b><span>(loadOptions)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Setup the loader with a list of Brainstem specific loadOptions</li>
<li>@param  {object} loadOptions Brainstem specific loadOptions (filters, include, only, etc)</li>
<li>@return {object} externalObject that was created.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='getCacheObject-dynamic'>
      #
(void)
<b>getCacheObject</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Returns the cache object from the storage manager.</li>
<li>@return {object} Object containing <code>count</code> and <code>results</code> that were cached.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='load-dynamic'>
      #
(void)
<b>load</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Loads the model from memory or the server.</li>
<li>@return {object} the loader&#39;s <code>externalObject</code></li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_getCollectionName-dynamic'>
      #
(void)
<b>_getCollectionName</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Returns the name of the collection that this loader maps to and will update in the storageManager.</li>
<li>@return {string} name of the collection</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_getExpectationName-dynamic'>
      #
(void)
<b>_getExpectationName</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Returns the name that expectations will be stubbed with (story or stories etc)</li>
<li>@return {string} name of the stub</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_getModel-dynamic'>
      #
(void)
<b>_getModel</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>This needs to return a constructor for the model that associations will be compared with.</li>
<li>This typically will be the current collection&#39;s model/current model constructor.</li>
<li>@return {Brainstem.Model}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_getModelsForAssociation-dynamic'>
      #
(void)
<b>_getModelsForAssociation</b><span>(association)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>This needs to return an array of models that correspond to the supplied association.</li>
<li>@return {array} models that are associated with this association</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_getIdsForAssociation-dynamic'>
      #
(void)
<b>_getIdsForAssociation</b><span>(association)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Returns an array of IDs that need to be loaded for this association.</li>
<li>@param  {string} association name of the association</li>
<li>@return {array} array of IDs to fetch for this association.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_createObjects-dynamic'>
      #
(void)
<b>_createObjects</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Sets up both the <code>internalObject</code> and <code>externalObject</code>.</li>
<li>In the case of models the <code>internalObject</code> and <code>externalObject</code> are the same.</li>
<li>In the case of collections the <code>internalObject</code> is a proxy object that updates</li>
<li>the <code>externalObject</code> when all loading is completed.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_updateObjects-dynamic'>
      #
(void)
<b>_updateObjects</b><span>(object, data, silent = false)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Updates the object with the supplied data. Will be called:</li>
<li><ul>
<li>after the server responds, <code>object</code> will be <code>internalObject</code> and</li>
</ul>
</li>
<li>data will be the result of <code>_updateStorageManagerFromResponse</code></li>
<li><ul>
<li>after all loading is complete, <code>object</code> will be the <code>externalObject</code></li>
</ul>
</li>
<li>and data will be the <code>internalObject</code></li>
<li>@param  {object} object object that will receive the data</li>
<li>@param  {object} data data that needs set on the object</li>
<li>@param  {boolean} silent whether or not to trigger loaded at the end of the update</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_parseLoadOptions-dynamic'>
      #
(void)
<b>_parseLoadOptions</b><span>(loadOptions = {})</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Parse supplied loadOptions, add defaults, transform them into</li>
<li>appropriate structures, and pull out important pieces.</li>
<li>@param  {object} loadOptions</li>
<li>@return {object} transformed loadOptions</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_buildCacheKey-dynamic'>
      #
(void)
<b>_buildCacheKey</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Builds a cache key to represent this object</li>
<li>@return {string} cache key</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_checkCacheForData-dynamic'>
      #
(void)
<b>_checkCacheForData</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Checks to see if the current requested data is available in the caching layer.</li>
<li>If it is available then update the externalObject with that data (via <code>_onLoadSuccess</code>).</li>
<li>@return {[boolean|object]} returns false if not found otherwise returns the externalObject.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_loadFromServer-dynamic'>
      #
(void)
<b>_loadFromServer</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Makes a GET request to the server via Backbone.sync with the built syncOptions.</li>
<li>@return {object} externalObject that will be updated when everything is complete.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_updateStorageManagerFromResponse-dynamic'>
      #
(void)
<b>_updateStorageManagerFromResponse</b><span>(resp)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Called when the server responds with data and needs to be persisted to the storageManager.</li>
<li>@param  {object} resp JSON data from the server</li>
<li>@return {[array|object]} array of models or model that was parsed.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_calculateAdditionalIncludes-dynamic'>
      #
(void)
<b>_calculateAdditionalIncludes</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Called after the server responds with the first layer of includes to determine if any more loads are needed.</li>
<li>It will only make additional loads if there were IDs returned during this load for a given association.</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_loadAdditionalIncludes-dynamic'>
      #
(void)
<b>_loadAdditionalIncludes</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Loads the next layer of includes from the server.</li>
<li>When all loads are complete, it will call <code>_onLoadingCompleted</code> which will resolve this layer.</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_buildSyncOptions-dynamic'>
      #
(void)
<b>_buildSyncOptions</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Generates the Brainstem specific options that are passed to Backbone.sync.</li>
<li>@return {object} options that are passed to Backbone.sync</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_shouldUseOnly-dynamic'>
      #
(void)
<b>_shouldUseOnly</b><span>()</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Decides whether or not the <code>only</code> filter should be applied in the syncOptions.</li>
<li>Models will not use the <code>only</code> filter as they use show routes.</li>
<li>@return {boolean} whether or not to use the <code>only</code> filter</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_modelsOrObj-dynamic'>
      #
(void)
<b>_modelsOrObj</b><span>(obj)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Parses the result of model.get(associationName) to either return a collection&#39;s models</li>
<li>or the model itself.</li>
<li>@param  {object|Backbone.Collection} obj result of calling <code>.get</code> on a model with an association name.</li>
<li>@return {object|array} either a model object or an array of models from a collection.</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_onServerLoadSuccess-dynamic'>
      #
(void)
<b>_onServerLoadSuccess</b><span>(resp, _status, _xhr)</span>
      <span class='bound note'>Bound</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Called when the Backbone.sync successfully responds from the server.</li>
<li>@param  {object} resp    JSON response from the server.</li>
<li>@param  {string} _status</li>
<li>@param  {object} _xhr    jQuery XHR object</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_onServerLoadError-dynamic'>
      #
(void)
<b>_onServerLoadError</b><span>(jqXHR, textStatus, errorThrown)</span>
      <span class='bound note'>Bound</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Called when the Backbone.sync has errored.</li>
<li>@param  {object} jqXhr</li>
<li>@param  {string} textStatus</li>
<li>@param  {string} errorThrown</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_onLoadSuccess-dynamic'>
      #
(void)
<b>_onLoadSuccess</b><span>(data)</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Updates the internalObject with the data in the storageManager and either loads more data or resolves this load.</li>
<li>Called after sync + storage manager updating.</li>
<li>@param  {array|object} data array of models or model from _updateStorageManagerFromResponse</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
  <div class='method_details'>
    <p class='signature' id='_onLoadingCompleted-dynamic'>
      #
(void)
<b>_onLoadingCompleted</b><span>()</span>
      <span class='bound note'>Bound</span>
      <br>
    </p>
    <div class='docstring'>
  <p>*</p><ul>
<li>Called when all loading (including nested loads) are complete.</li>
<li>Updates the <code>externalObject</code> with the data that was gathered and resolves the promise.</li>
<li>@return {undefined}</li>
</ul>

</div>
<div class='tags'>
</div>
  </div>
</div>
    </div>
    <div id='footer'>
  November 17, 14 15:24:45 by
  <a href='https://github.com/coffeedoc/codo' title='CoffeeScript API documentation generator'>
    Codo
  </a>
  2.0.9
  &#10034;
  Press H to see the keyboard shortcuts
  &#10034;
  <a href='http://twitter.com/netzpirat' target='_parent'>@netzpirat</a>
  &#10034;
  <a href='http://twitter.com/_inossidabile' target='_parent'>@_inossidabile</a>
</div>
<iframe id='search_frame'></iframe>
<div id='fuzzySearch'>
  <input type='text'>
  <ol></ol>
</div>
<div id='help'>
  <p>
    Quickly fuzzy find classes, mixins, methods, file:
  </p>
  <ul>
    <li>
      <span>T</span>
      Open fuzzy finder dialog
    </li>
  </ul>
  <p>
    Control the navigation frame:
  </p>
  <ul>
    <li>
      <span>L</span>
      Toggle list view
    </li>
    <li>
      <span>C</span>
      Show class list
    </li>
    <li>
      <span>I</span>
      Show mixin list
    </li>
    <li>
      <span>F</span>
      Show file list
    </li>
    <li>
      <span>M</span>
      Show method list
    </li>
    <li>
      <span>E</span>
      Show extras list
    </li>
  </ul>
  <p>
    You can focus and blur the search input:
  </p>
  <ul>
    <li>
      <span>S</span>
      Focus search input
    </li>
    <li>
      <span>Esc</span>
      Blur search input
    </li>
  </ul>
</div>
  </body>
</html>